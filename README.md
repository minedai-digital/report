# نظام تقارير المرور الطبية

نظام احترافي لإنشاء وطباعة تقارير المرور الطبية للمستشفيات والمراكز الصحية باللغة العربية.

## الميزات الرئيسية

- واجهة سهلة الاستخدام باللغة العربية مع دعم النص من اليمين إلى اليسار
- إنشاء تقارير مراجعة داخلية احترافية بتنسيق PDF قابل للطباعة
- نظام إدخال بيانات متقدم مع:
  - إكمال تلقائي لأسماء المفتشين والجهات
  - ~~إكمال تلقائي لأسماء الموظفين~~ (تمت إزالة هذه الميزة)
  - إدخال حر لأسماء الموظفين دون قيود
  - تحديد تلقائي للوظائف عند إدخال اسم الموظف
- إدارة حالات الغياب والانضباط مع جدول تلقائي
- تصدير التقارير إلى ملفات PDF
- حفظ البيانات في جداول Google Sheets
- تصميم متجاوب يعمل على جميع الأجهزة
- نظام طباعة محسّن للحصول على تقارير احترافية

## هيكل المشروع

```
report/
│
├── index.html          # صفحة التطبيق الرئيسية
├── css/
│   └── styles.css      # أنماط CSS للتطبيق
├── js/
│   ├── main.js         # منطق التطبيق الرئيسي
│   ├── database.js     # وحدة إدارة قاعدة البيانات
│   └── utils.js        # وظائف مساعدة
├── data/
│   └── database.json   # تخزين بيانات JSON للمفتشين والجهات والموظفين والوظائف
├── docs/
│   ├── user-guide.md   # دليل المستخدم
│   ├── api.md          # توثيق API
│   ├── architecture.md # توثيق البنية
│   └── development.md  # دليل التطوير
├── tests/
│   └── test-runner.js  # مشغل اختبارات الوحدة
├── package.json        # تبعيات المشروع وإعدادات البناء
└── README.md           # هذا الملف
```

## المتطلبات

- متصفح ويب حديث (Chrome، Firefox، Edge)
- اتصال بالإنترنت (للخطوط والرموز)

## التثبيت والاستخدام

1. استنساخ المستودع أو تنزيل ملفات المشروع
2. فتح `index.html` في متصفح ويب
3. البدء في استخدام النظام لإنشاء تقارير المرور الطبية

### للتطوير المحلي

```bash
# تثبيت التبعيات
npm install

# تشغيل خادم تطوير محلي
npm start

# أو تشغيل على منفذ مخصص
npm run dev
```

## كيفية الاستخدام

1. **ملء بيانات التقرير**:
   - أدخل اسم المفتش (مع إكمال تلقائي)
   - أدخل اسم الجهة (مع إكمال تلقائي)
   - حدد تاريخ ووقت المرور

2. **إضافة حالات الغياب**:
   - انقر على "إضافة حالة غياب"
   - أدخل اسم الموظف (بدون قيود أو اقتراحات)
   - حدد الوظيفة من القائمة المنسدلة

3. **إنشاء التقرير**:
   - انقر على "إنشاء التقرير"
   - راجع التقرير المُنشأ

4. **الإجراءات المتاحة**:
   - **طباعة التقرير**: انقر على زر الطباعة
   - **تصدير PDF**: استخدم خيارات الطباعة لحفظ كـ PDF
   - **إرسال إلى Google Sheets**: انقر على زر الإرسال

## ميزات متقدمة

### إكمال تلقائي
- يتم توفير إكمال تلقائي لأسماء المفتشين والجهات لتسهيل الإدخال
- أسماء الموظفين تُدخل بشكل حر دون اقتراحات

### إدارة البيانات
- جميع البيانات مخزنة في ملف `data/database.json`
- يمكن تعديل قوائم المفتشين والجهات والموظفين والوظائف بسهولة

### تصدير البيانات
- التصدير إلى PDF عبر ميزة الطباعة المدمجة في المتصفح
- الإرسال إلى جداول Google Sheets عبر Google Apps Script

## حل مشاكل شائعة

### مشاكل الطباعة
إذا كانت أنماط الطباعة لا تعمل بشكل صحيح:
1. تأكد من استخدام أحدث إصدار من المتصفح
2. تحقق من إعدادات الطباعة في المتصفح
3. استخدم اختبار الطباعة المتوفر في `test-print-styles.html`

### مشاكل إرسال Google Sheets
إذا كان إرسال البيانات إلى Google Sheets لا يعمل:
1. تحقق من أن Google Apps Script مُنشر بشكل صحيح
2. راجع دليل استكشاف الأخطاء وإصلاحها في `GOOGLE_SHEETS_TROUBLESHOOTING.md`
3. استخدم ملفات الاختبار لتشخيص المشكلة

## المساهمة

مرحبًا بك في المساهمات! يرجى اتباع هذه الخطوات:

1. عمل Fork للمستودع
2. إنشاء فرع للميزة (`git checkout -b feature/AmazingFeature`)
3. تنفيذ التغييرات
4. تنفيذ الاختبارات المناسبة
5. إرسال Pull Request

## الاختبار

لتنفيذ اختبارات الوحدة:

```bash
npm test

# أو تشغيل في وضع المراقبة
npm run test:watch
```

## التوثيق

للمزيد من المعلومات التفصيلية، يرجى الرجوع إلى:

- [دليل المستخدم](docs/user-guide.md)
- [توثيق API](docs/api.md)
- [توثيق البنية](docs/architecture.md)
- [دليل التطوير](docs/development.md)

## الترخيص

هذا المشروع مرخص بموجب ترخيص MIT - راجع ملف [LICENSE](LICENSE) للمزيد من التفاصيل.

## الدعم

للحصول على الدعم أو الإبلاغ عن المشكلات، يرجى:

1. فتح مشكلة في هذا المستودع
2. تقديم وصف مفصل للمشكلة
3. تضمين خطوات لإعادة إنتاج المشكلة